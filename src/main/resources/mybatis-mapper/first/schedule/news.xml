<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shinvest.ap.schedule.mapper.JobNewsMapper">

<!-- 뉴스 -->
	<delete id="deleteNews">
DELETE FROM T_NEWS_INFO
	</delete>
	
	<insert id="insertNews" parameterType="map">
INSERT INTO T_NEWS_INFO (RGSTDE,RGSTTM,NEWS_SJ,NEWS_SRC,NEWS_CN,RGST_DT) VALUES
		<foreach collection="data" item="i" separator=",">
(REGEXP_REPLACE(#{i.rgstde},'([\d]{4})([\d]{2})([\d]{2})','\1/\2/\3'),REGEXP_REPLACE(#{i.rgsttm},'([\d]{2})([\d]{2})([\d]{2})','\1:\2:\3'),#{i.newsSj},#{i.newsSrc},#{i.newsCn},NOW())
		</foreach>
	</insert>



<!-- 리서치 -->
	<delete id="deleteResearch">
DELETE FROM T_RESRCH_INFO
	</delete>

	<insert id="insertResearch" parameterType="map">
INSERT INTO T_RESRCH_INFO (RGST_SEQ,RGSTDE,WRK_SEQ,COMPANY_NM,OPENDE,STBD_CODE,SJ,USER_NM,FILE_NM,RGST_DT) VALUES
		<foreach collection="data" item="i" separator=",">
(#{i.rgstSeq}::INTEGER,REGEXP_REPLACE(#{i.rgstde},'([\d]{4})([\d]{2})([\d]{2})','\1/\2/\3'),#{i.wrkSeq}::INTEGER,#{i.companyNm},#{i.opende},#{i.stbdCode},#{i.sj},#{i.userNm},#{i.fileNm},NOW())
		</foreach>
	</insert>



<!-- 랭킹 -->
	<delete id="deleteRank" parameterType="string">
DELETE FROM T_RANK_INFO WHERE RANK_CL = #{rankCl}
	</delete>

	<insert id="insertRank" parameterType="map">
INSERT INTO T_RANK_INFO (RANK_CL, RANK_SEQ, RANK_NM, VIEW_CNT, RGST_DT) VALUES
		<foreach collection="data" item="i" separator=",">
(#{i.rankCl},#{i.rankSeq}::INTEGER,#{i.rankNm},#{i.viewCnt}::INTEGER,NOW())
		</foreach>
	</insert>

</mapper>
