<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shinvest.ap.app.wrkCat.mapper.WrkMapper">

    <sql id="paging">
        limit #{pageSize} offset (#{page} - 1) * #{pageSize}
    </sql>

    <select id="selectList" resultType="com.shinvest.ap.app.wrkCat.model.WrkModel" parameterType="com.shinvest.ap.common.paging.Criteria">
        select
            row_number() over (ORDER BY UPPER(wrk_nm) ASC) as rownum,
            wrk_id,
            wrk_nm,
            wrk_dsc,
            use_yn,
            rgst_id,
            rgst_dt,
            modi_id,
            modi_dt
        from
            t_wrk_cat
        where
            use_yn = 'Y'
        ORDER BY rownum ASC
        <include refid="paging"></include>
    </select>

    <select id="selectListCount" resultType="int" parameterType="com.shinvest.ap.common.paging.Criteria">
        select count(*)
        from
            t_wrk_cat
        where
            use_yn = 'Y'
    </select>

    <select id="select" resultType="com.shinvest.ap.app.wrkCat.model.WrkModel" parameterType="com.shinvest.ap.app.wrkCat.model.WrkModel">
        select
            wrk_id,
            wrk_nm,
            wrk_dsc,
            use_yn,
            rgst_id,
            rgst_dt,
            modi_id,
            modi_dt
        from
            t_wrk_cat
        where
            wrk_id = #{wrkId}
    </select>

    <insert id="insert" parameterType="com.shinvest.ap.app.wrkCat.model.WrkModel">
        insert into t_wrk_cat (
            wrk_id
            , wrk_nm
            , wrk_dsc
            , use_yn
            , rgst_id
            , rgst_dt
            , modi_id
            , modi_dt
        ) values (
            #{wrkId}
            , #{wrkNm}
            , #{wrkDsc}
            , 'Y'
            , #{rgstId}
            , now()
            , #{modiId}
            , now()
        )
    </insert>

    <update id="update" parameterType="com.shinvest.ap.app.wrkCat.model.WrkModel">
        update t_wrk_cat
        set
            wrk_nm = #{wrkNm}
            , wrk_dsc = #{wrkDsc}
            , modi_dt = now()
            , modi_id = #{modiId}
            , use_yn = 'Y'
        where
            wrk_id = #{wrkId}
    </update>

    <update id="delete" parameterType="com.shinvest.ap.app.wrkCat.model.WrkModel">
        update t_wrk_cat
        set
            use_yn = 'N'
        where
            wrk_id = #{wrkId}
    </update>
</mapper>